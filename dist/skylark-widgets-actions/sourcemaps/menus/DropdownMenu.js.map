{"version":3,"sources":["menus/DropdownMenu.js"],"names":["define","Vector2","geom","Widget","TextMixin","ButtonMenu","DropdownMenu","inherit","_construct","parent","prototype","call","this","_buildText","_elm","style","backgroundColor","Editor","theme","buttonColor","cursor","pointerEvents","preventDragEvents","panel","overflow","display","zIndex","icon","arrow","document","createElement","position","right","top","width","height","appendChild","direction","DOWN","expanded","itemsSize","items","self","onmouseenter","setExpanded","buttonOverColor","onmouseleave","setDirection","location","showArrow","setIcon","left","src","removeOption","index","length","destroy","splice","addOption","name","callback","button","setText","setAlignment","Text","LEFT","set","setOnClick","undefined","push","addMenu","menu","setMargin","y","size","x","out","testAxis","bottom","UP","RIGHT","updateItems","i","updateInterface","updateSize"],"mappings":"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","file":"../../menus/DropdownMenu.js","sourcesContent":["define([\r\n\t\"skylark-langx-numerics/Vector2\",\r\n\t\"skylark-domx-geom\",\r\n\r\n\t\"skylark-widgets-base/Widget\",\r\n\t\"skylark-widgets-base/mixins/TextMixin\",\r\n\r\n\t\"./ButtonMenu\"\r\n],function(\r\n\tVector2,\r\n\tgeom,\r\n\t\r\n\tWidget,\r\n\tTextMixin,\r\n\r\n\tButtonMenu\r\n){\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * Dropdown menu element, used to create dropdowns in menu bars and in context menus.\r\n\t * \r\n\t * @class DropdownMenu\r\n\t * @extends {Text}\r\n\t * @param {Widget} parent Parent widget. \r\n\t */\r\n\r\n\r\n\tvar DropdownMenu = Widget.inherit({\r\n\r\n\t\t_construct : function (parent) {\r\n\t\t\tWidget.prototype._construct.call(this, parent, \"div\");\r\n\r\n\t\t\tthis._buildText();\r\n\r\n\r\n\t\t\tthis._elm.style.backgroundColor = Editor.theme.buttonColor;\r\n\t\t\tthis._elm.style.cursor = \"pointer\";\r\n\t\t\tthis._elm.style.pointerEvents = \"auto\";\r\n\r\n\t\t\tthis.preventDragEvents();\r\n\r\n\t\t\t/**\r\n\t\t\t * Panel element, where the items are stored.\r\n\t\t\t *\r\n\t\t\t * This DOM element is added directly to the parent DOM element.\r\n\t\t\t *\r\n\t\t\t * @attribute panel\r\n\t\t\t * @type {DOM}\r\n\t\t\t */\r\n\t\t\tthis.panel = new Widget(parent, \"div\");\r\n\t\t\tthis.panel._elm.style.overflow = \"visible\";\r\n\t\t\tthis.panel._elm.style.display = \"none\";\r\n\t\t\tthis.panel._elm.style.zIndex = \"300\";\r\n\r\n\t\t\t/**\r\n\t\t\t * Option icon image, the element is only created when a icon is set.\r\n\t\t\t *\r\n\t\t\t * @attribute icon\r\n\t\t\t * @type {DOM}\r\n\t\t\t */\r\n\t\t\tthis.icon = null;\r\n\r\n\t\t\t/**\r\n\t\t\t * Decorative arrow.\r\n\t\t\t *\r\n\t\t\t * @attribute arrow\r\n\t\t\t * @type {DOM}\r\n\t\t\t */\r\n\t\t\tthis.arrow = document.createElement(\"img\");\r\n\t\t\tthis.arrow.style.display = \"none\";\r\n\t\t\tthis.arrow.style.position = \"absolute\";\r\n\t\t\tthis.arrow.style.right = \"5px\";\r\n\t\t\tthis.arrow.style.top = \"3px\";\r\n\t\t\tthis.arrow.style.width = \"12px\";\r\n\t\t\tthis.arrow.style.height = \"12px\";\r\n\t\t\t//this.arrow.src = Global.FILE_PATH + \"icons/misc/arrow_right.png\";\r\n\t\t\tthis._elm.appendChild(this.arrow);\r\n\r\n\t\t\t/**\r\n\t\t\t * Direction to open the dropdown.\r\n\t\t\t *\r\n\t\t\t * @attribute direction\r\n\t\t\t * @type {Number}\r\n\t\t\t */\r\n\t\t\tthis.direction = DropdownMenu.DOWN;\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Indicates if the dropdown menu is expanded.\r\n\t\t\t *\r\n\t\t\t * @attribute expanded\r\n\t\t\t * @type {Boolean}\r\n\t\t\t */\r\n\t\t\tthis.expanded = false;\r\n\t\t\tthis.itemsSize = new Vector2(150, 20);\r\n\r\n\t\t\t/**\r\n\t\t\t * Items available in the dropdown.\r\n\t\t\t *\r\n\t\t\t * Items are stored as: {button:button, value:object, name:string}\r\n\t\t\t *\r\n\t\t\t * @attribute items\r\n\t\t\t * @type {Array}\r\n\t\t\t */\r\n\t\t\tthis.items = [];\r\n\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tthis._elm.onmouseenter = function()\r\n\t\t\t{\r\n\t\t\t\tself.setExpanded(true);\r\n\t\t\t\tself._elm.style.backgroundColor = Editor.theme.buttonOverColor;\r\n\t\t\t};\r\n\r\n\t\t\tthis._elm.onmouseleave = function()\r\n\t\t\t{\r\n\t\t\t\tself.setExpanded(false);\r\n\t\t\t\tself._elm.style.backgroundColor = Editor.theme.buttonColor;\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tthis.panel._elm.onmouseenter = function()\r\n\t\t\t{\r\n\t\t\t\tself.setExpanded(true);\r\n\t\t\t};\r\n\r\n\t\t\tthis.panel._elm.onmouseleave = function()\r\n\t\t\t{\r\n\t\t\t\tself.setExpanded(false);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set location to where items should open.\r\n\t\t *\r\n\t\t * @method setDirection\r\n\t\t */\r\n\t\tsetDirection : function(location) {\r\n\t\t\tthis.direction = location;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Show arrow.\r\n\t\t *\r\n\t\t * @method showArrow\r\n\t\t */\r\n\t\tshowArrow : function() {\r\n\t\t\tthis.arrow.style.display = \"block\";\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set icon.\r\n\t\t *\r\n\t\t * @method setIcon\r\n\t\t * @param {String} icon Image URL.\r\n\t\t */\r\n\t\tsetIcon : function(icon) {\r\n\t\t\tif(this.icon === null) {\r\n\t\t\t\tthis.icon = document.createElement(\"img\");\r\n\t\t\t\tthis.icon.style.display = \"block\";\r\n\t\t\t\tthis.icon.style.position = \"absolute\";\r\n\t\t\t\tthis.icon.style.left = \"5px\";\r\n\t\t\t\tthis.icon.style.top = \"3px\";\r\n\t\t\t\tthis.icon.style.width = \"12px\";\r\n\t\t\t\tthis.icon.style.height = \"12px\";\r\n\t\t\t\tthis._elm.appendChild(this.icon);\r\n\t\t\t}\r\n\r\n\t\t\tthis.icon.src = icon;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Remove option from menu.\r\n\t\t *\r\n\t\t * @method removeOption\r\n\t\t * @param {Number} index\r\n\t\t */\r\n\t\tremoveOption : function(index) {\r\n\t\t\tif(index >= 0 && index < this.items.length) {\r\n\t\t\t\tthis.items[index].destroy();\r\n\t\t\t\tthis.items.splice(index, 1);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Add new option to menu\r\n\t\t *\r\n\t\t * @method addOption\r\n\t\t * @param {String} name of the option\r\n\t\t * @param {Function} callback Callback function\r\n\t\t * @param {String} icon Icon URL.\r\n\t\t * @return {ButtonMenu} Button created for the new option.\r\n\t\t */\r\n\t\taddOption : function(name, callback, icon) {\r\n\t\t\tvar button = new ButtonMenu(this.panel);\r\n\t\t\tbutton._elm.style.zIndex = \"200\";\r\n\t\t\tbutton.setText(name);\r\n\t\t\tbutton.setAlignment(Text.LEFT);\r\n\t\t\tbutton.position.set(25, 0);\r\n\r\n\t\t\tvar self = this;\r\n\t\t\tbutton.setOnClick(function(){\r\n\t\t\t\tcallback();\r\n\t\t\t\tself.setExpanded(false);\r\n\t\t\t});\r\n\r\n\t\t\tif(icon !== undefined) \t{\r\n\t\t\t\tbutton.setIcon(icon);\r\n\t\t\t}\r\n\r\n\t\t\tthis.items.push(button);\r\n\r\n\t\t\treturn button;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Add new menu to menu.\r\n\t\t *\r\n\t\t * @method addOption\r\n\t\t * @param {String} name Name of the option.\r\n\t\t * @param {String} icon Optional icon, image URL.\r\n\t\t * @return {DropdownMenu} The new menu created.\r\n\t\t */\r\n\t\taddMenu : function(name, icon) {\r\n\t\t\tvar menu = new DropdownMenu(this.panel);\r\n\t\t\tmenu.setText(name);\r\n\t\t\tmenu.setDirection(DropdownMenu.LEFT);\r\n\t\t\tmenu.showArrow();\r\n\t\t\tmenu.setAlignment(Text.LEFT);\r\n\t\t\tmenu.setMargin(25);\r\n\t\t\t\r\n\t\t\tif(icon !== undefined)\r\n\t\t\t{\r\n\t\t\t\tmenu.setIcon(icon);\r\n\t\t\t}\r\n\r\n\t\t\tthis.items.push(menu);\r\n\r\n\t\t\treturn menu;\r\n\t\t},\r\n\r\n\t\t/** \r\n\t\t * Update expanded state, position all items in this dropdown.\r\n\t\t * \r\n\t\t * @method setExpanded\r\n\t\t * @param {Boolean} expanded If true the menu will be expanded.\r\n\t\t */\r\n\t\tsetExpanded : function(expanded){\r\n\t\t\tthis.expanded = expanded;\r\n\r\n\t\t\tif(this.expanded) {\r\n\t\t\t\tthis.panel._elm.style.display = \"block\";\r\n\r\n\t\t\t\tif(this.direction === DropdownMenu.DOWN){\r\n\t\t\t\t\tthis.panel._elm.style.top = (this.position.y + this.size.y) + \"px\";\r\n\t\t\t\t\tthis.panel._elm.style.left = this.position.x + \"px\";\r\n\r\n\t\t\t\t\t//var out = DOMUtils.checkBorder(this.panel);\r\n\t\t\t\t\tvar out = geom.testAxis(this.panel);\r\n\r\n\t\t\t\t\tif(out.y !== 0)\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.top = null;\r\n\t\t\t\t\t\tthis.panel._elm.style.bottom = (this.position.y + this.size.y) + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(out.x !== 0)\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.left = (this.position.x - out.x) + \"px\"; \r\n\t\t\t\t\t}\r\n\t\t\t\t} else if(this.direction === DropdownMenu.UP){\r\n\t\t\t\t\tthis.panel._elm.style.bottom = (this.position.y + this.size.y) + \"px\";\r\n\t\t\t\t\tthis.panel._elm.style.left = this.position.x + \"px\";\r\n\r\n\t\t\t\t\t//var out = DOMUtils.checkBorder(this.panel);\r\n\t\t\t\t\tvar out = geom.testAxis(this.panel);\r\n\t\t\t\t\tif(out.y !== 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.bottom = null;\r\n\t\t\t\t\t\tthis.panel._elm.style.top = (this.position.y + this.size.y) + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(out.x !== 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.left = (this.position.x - out.x) + \"px\"; \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if(this.direction === DropdownMenu.LEFT)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.panel._elm.style.top = this.position.y + \"px\";\r\n\t\t\t\t\tthis.panel._elm.style.left = (this.position.x + this.size.x) + \"px\";\r\n\r\n\t\t\t\t\t//var out = DOMUtils.checkBorder(this.panel);\r\n\t\t\t\t\tvar out = geom.testAxis(this.panel);\r\n\t\t\t\t\tif(out.x !== 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.left = (this.position.x - this.size.x) + \"px\"; \r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(out.y !== 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.top = (this.position.y - out.y) + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if(this.direction === DropdownMenu.RIGHT)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.panel._elm.style.top = this.position.y + \"px\";\r\n\t\t\t\t\tthis.panel._elm.style.left = (this.position.x - this.size.x) + \"px\";\r\n\r\n\t\t\t\t\t//var out = DOMUtils.checkBorder(this.panel);\r\n\t\t\t\t\tvar out = geom.testAxis(this.panel);\r\n\t\t\t\t\tif(out.x !== 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.left = (this.position.x + this.size.x) + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(out.y !== 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.top = (this.position.y - out.y) + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.panel._elm.style.display = \"none\";\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Update all items in the menu.\r\n\t\t * \r\n\t\t * @method updateItems\r\n\t\t */\r\n\t\tupdateItems : function() {\r\n\t\t\tfor(var i = 0; i < this.items.length; i++) {\r\n\t\t\t\tthis.items[i].size.set(this.itemsSize.x, this.itemsSize.y);\r\n\t\t\t\tthis.items[i].position.set(0, this.itemsSize.y * i);\r\n\t\t\t\tthis.items[i].updateInterface();\r\n\t\t\t}\r\n\r\n\t\t\tthis.panel._elm.style.width = this.size.x + \"px\";\r\n\t\t\tthis.panel._elm.style.height = (this.itemsSize.y * this.items.length) + \"px\";\r\n\t\t},\r\n\r\n\t\tdestroy : function() {\r\n\t\t\tWidget.prototype.destroy.call(this);\r\n\r\n\t\t\tthis.parent.destroy();\r\n\t\t},\r\n\r\n\t\tupdateSize : function() {\r\n//\t\t\tText.prototype.updateSize.call(this);\r\n\r\n\t\t\tthis.updateItems();\r\n\t\t},\r\n\r\n\r\n\t\t...TextMixin\r\n\r\n\t});\r\n\r\n\r\n\tDropdownMenu.DOWN = 0;\r\n\tDropdownMenu.UP = 1;\r\n\tDropdownMenu.LEFT = 2;\r\n\tDropdownMenu.RIGHT = 3;\r\n\r\n\r\n\r\n\treturn DropdownMenu;\r\n});"]}