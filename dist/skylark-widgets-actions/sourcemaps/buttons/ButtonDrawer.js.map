{"version":3,"sources":["buttons/ButtonDrawer.js"],"names":["define","Vector2","Widget","actions","ButtonImage","ButtonDrawer","inherit","_construct","parent","prototype","call","this","_elm","style","zIndex","backgroundColor","Editor","theme","buttonColor","overflow","panel","element","barColor","items","itemsPerLine","itemsSize","itemsScale","expanded","setExpanded","self","onmouseenter","buttonOverColor","onmouseleave","clear","i","length","destroy","display","insertItem","attachTo","push","addItem","image","callback","altText","button","setImage","setOnClick","updateInterface","undefined","setAltText","removeItem","index","splice","updatePanelSize","size","x","y","Math","floor","updateSize","position","set","updatePosition","updateItems","updateVisibility","visible","optionsSize","get","v","optionsPerLine","addOption","insertOption","updateOptions","removeOption","reomveItem","buttons"],"mappings":"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","file":"../../buttons/ButtonDrawer.js","sourcesContent":["define([\r\n\t\"skylark-langx-numerics/Vector2\",\r\n\t\"skylark-widgets-base/Widget\",\r\n\t\"../actions\",\r\n\t\"./ButtonImage\"\r\n],function(\r\n\tVector2,\r\n\tWidget,\r\n\tactions,\r\n\tButtonImage\r\n){\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * Button with text, inherits all methods available on the Text class.\r\n\t * \r\n\t * Used in menu bars, panels, etc.\r\n\t *\r\n\t * @class ButtonDrawer\r\n\t * @extends {ButtonImage}\r\n\t * @param {Widget} parent Parent element.\r\n\t */\r\n\tvar ButtonDrawer = ButtonImage.inherit({\r\n\r\n\t\t_construct : function (parent) {\r\n\t\t\tButtonImage.prototype._construct.call(this, parent);\r\n\r\n\r\n\t\t\tthis._elm.style.zIndex = \"200\";\r\n\t\t\tthis._elm.style.backgroundColor = Editor.theme.buttonColor;\r\n\t\t\tthis._elm.style.overflow = \"visible\";\r\n\r\n\t\t\tthis.panel = new Widget(this, \"div\");\r\n\t\t\tthis.panel.element.style.overflow = \"visible\";\r\n\t\t\tthis.panel.element.style.backgroundColor = Editor.theme.barColor;\r\n\t\t\tthis.panel.element.style.zIndex = \"250\";\r\n\r\n\t\t\t/** \r\n\t\t\t * List of the items in this panel.\r\n\t\t\t *\r\n\t\t\t * @attribute items\r\n\t\t\t * @type {Array}\r\n\t\t\t */\r\n\t\t\tthis.items = [];\r\n\r\n\t\t\t/**\r\n\t\t\t * Number of maximum items per row\r\n\t\t\t *\r\n\t\t\t * @attribute itemsPerLine\r\n\t\t\t * @type {Number}\r\n\t\t\t */\r\n\t\t\tthis.itemsPerLine = 3;\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Size of each option, also affects the size of the panel.\r\n\t\t\t *\r\n\t\t\t * @attribute itemsSize\r\n\t\t\t * @type {Vector2}\r\n\t\t\t */\r\n\t\t\tthis.itemsSize = new Vector2(40, 40);\r\n\r\n\t\t\t/**\r\n\t\t\t * Scale of the inner icon of the items created from the addItem() method.\r\n\t\t\t *\r\n\t\t\t * @attribute itemsScale\r\n\t\t\t * @type {Vector2}\r\n\t\t\t */\r\n\t\t\tthis.itemsScale = new Vector2(0.7, 0.7);\r\n\r\n\t\t\t/**\r\n\t\t\t * Indicates if the button drawer panel is visible.\r\n\t\t\t *\r\n\t\t\t * @attribute expanded\r\n\t\t\t * @type {Boolean}\r\n\t\t\t */\r\n\t\t\tthis.expanded = false;\r\n\t\t\tthis.setExpanded(false);\r\n\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tthis._elm.onmouseenter = function()\r\n\t\t\t{\r\n\t\t\t\tself.element.style.backgroundColor = Editor.theme.buttonOverColor;\r\n\t\t\t\tself.setExpanded(true);\r\n\t\t\t};\r\n\t\t\tthis._elm.onmouseleave = function()\r\n\t\t\t{\r\n\t\t\t\tself.element.style.backgroundColor = Editor.theme.buttonColor;\r\n\t\t\t\tself.setExpanded(false);\r\n\t\t\t};\r\n\r\n\t\t\tthis.panel.element.onmouseenter = function()\r\n\t\t\t{\r\n\t\t\t\tself.setExpanded(true);\r\n\t\t\t};\r\n\t\t\tthis.panel.element.onmouseleave = function()\r\n\t\t\t{\r\n\t\t\t\tself.setExpanded(false);\r\n\t\t\t};\r\n\t\t},\r\n\r\n\r\n\t\tclear : function(){\r\n\t\t\tfor(var i = 0; i < this.items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tthis.items[i].destroy();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.items = [];\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Expand or close the button drawer panel.\r\n\t\t *\r\n\t\t * @method setExpanded\r\n\t\t * @param {Boolean} expanded\r\n\t\t */\r\n\t\tsetExpanded : function(expanded){\r\n\t\t\tthis.expanded = expanded;\r\n\t\t\tthis.panel.element.style.display = this.expanded ? \"block\" : \"none\";\r\n\t\t},\r\n\r\n\t\t/** \r\n\t\t * Insert new option from already created element.\r\n\t\t *\r\n\t\t * @method insertItem\r\n\t\t * @param {Widget} Widget of the option to be inserted in the drawer\r\n\t\t */\r\n\t\tinsertItem : function(element){\r\n\t\t\telement.attachTo(this.panel);\r\n\t\t\tthis.items.push(element);\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t * Add new option to the menu.\r\n\t\t * \r\n\t\t * @method addItem\r\n\t\t * @param {String} image\r\n\t\t * @param {Function} callback\r\n\t\t * @param {String} altText\r\n\t\t */\r\n\t\taddItem : function(image, callback, altText){\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tvar button = new ButtonImage(this.panel);\r\n\t\t\tbutton.setImage(image);\r\n\t\t\tbutton.setOnClick(function()\r\n\t\t\t{\r\n\t\t\t\tcallback();\r\n\t\t\t\tself.expanded = false;\r\n\t\t\t\tself.updateInterface();\r\n\t\t\t});\r\n\r\n\t\t\tif(altText !== undefined)\r\n\t\t\t{\r\n\t\t\t\tbutton.setAltText(altText);\r\n\t\t\t}\r\n\r\n\t\t\tthis.items.push(button);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Remove an option from the menu.\r\n\t\t *\r\n\t\t * @method removeItem\r\n\t\t * @param {Number} index\r\n\t\t */\r\n\t\tremoveItem : function(index) \t{\r\n\t\t\tif(index >= 0 && index < this.items.length)\r\n\t\t\t{\r\n\t\t\t\tthis.items[index].destroy();\r\n\t\t\t\tthis.items.splice(index, 1);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Updates drawer panel size based on the number of items available.\r\n\t\t * \r\n\t\t * @method updatePanelSize\r\n\t\t */\r\n\t\tupdatePanelSize : function()\t{\r\n\t\t\tvar itemsPerLine = (this.items.length < this.itemsPerLine) ? this.items.length : this.itemsPerLine;\r\n\r\n\t\t\tthis.panel.size.x = (this.itemsSize.x * itemsPerLine);\r\n\t\t\tthis.panel.size.y = (this.itemsSize.y * (Math.floor((this.items.length - 1) / itemsPerLine) + 1));\r\n\t\t\tthis.panel.updateSize();\r\n\r\n\t\t\tthis.panel.position.set(this.itemsSize.x, 0);\r\n\t\t\tthis.panel.updatePosition();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Update drawer items position and size.\r\n\t\t *\r\n\t\t * Should be called after change in items displacement variables).\r\n\t\t *\r\n\t\t * @method updateItems\r\n\t\t */\r\n\t\tupdateItems : function()\t{\r\n\t\t\tthis.updatePanelSize();\r\n\r\n\t\t\tvar itemsPerLine = (this.items.length < this.itemsPerLine) ? this.items.length : this.itemsPerLine;\r\n\r\n\t\t\tfor(var i = 0; i < this.items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tthis.items[i].size.set(this.itemsSize.x, this.itemsSize.y);\r\n\t\t\t\tthis.items[i].position.x = this.itemsSize.x * (i % itemsPerLine);\r\n\t\t\t\tthis.items[i].position.y = this.itemsSize.y * Math.floor(i / itemsPerLine);\r\n\t\t\t\tthis.items[i].updateInterface();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdateVisibility : function()\t{\r\n\t\t\tthis._elm.style.display = this.visible ? \"block\" : \"none\";\r\n\t\t},\r\n\r\n\r\n\t\toptionsSize : {\r\n\t\t\tget : function() {\r\n\t\t\t\treturn this.itemsSize;\r\n\t\t\t},\r\n\r\n\t\t\tset : function(v) {\r\n\t\t\t\tthis.itemsSize = v\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\toptionsPerLine : {\r\n\t\t\tget : function() {\r\n\t\t\t\treturn this.itemsPerLine;\r\n\t\t\t},\r\n\r\n\t\t\tset : function(v) {\r\n\t\t\t\tthis.itemsPerLine = v\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t\r\n\tButtonDrawer.prototype.addOption = ButtonDrawer.prototype.addItem;\r\n\tButtonDrawer.prototype.insertOption = ButtonDrawer.prototype.insertItem;\r\n\tButtonDrawer.prototype.updateOptions = ButtonDrawer.prototype.updateItems;\r\n\tButtonDrawer.prototype.removeOption = ButtonDrawer.prototype.reomveItem;\r\n\r\n\r\n\treturn actions.buttons.ButtonDrawer = ButtonDrawer;\r\n});"]}