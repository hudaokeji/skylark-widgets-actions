/**
 * skylark-widgets-actions - The skylark action widgets library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-actions/
 * @license MIT
 */
define(["skylark-langx-numbers/Vector2","skylark-domx-geom","skylark-widgets-base/Widget","skylark-widgets-base/mixins/TextMixin","../buttons/ButtonMenu"],function(t,i,e,s,o){"use strict";var n=e.inherit({_construct:function(i){e.prototype._construct.call(this,i,"div"),this._buildTextSpan(),this._elm.style.backgroundColor=Editor.theme.buttonColor,this._elm.style.cursor="pointer",this._elm.style.pointerEvents="auto",this.preventDragEvents(),this.panel=new e(i,"div"),this.panel._elm.style.overflow="visible",this.panel._elm.style.display="none",this.panel._elm.style.zIndex="300",this.icon=null,this.arrow=document.createElement("img"),this.arrow.style.display="none",this.arrow.style.position="absolute",this.arrow.style.right="5px",this.arrow.style.top="3px",this.arrow.style.width="12px",this.arrow.style.height="12px",this._elm.appendChild(this.arrow),this.direction=n.DOWN,this.expanded=!1,this.optionsSize=new t(150,20),this.options=[];var s=this;this._elm.onmouseenter=function(){s.setExpanded(!0),s._elm.style.backgroundColor=Editor.theme.buttonOverColor},this._elm.onmouseleave=function(){s.setExpanded(!1),s._elm.style.backgroundColor=Editor.theme.buttonColor},this.panel._elm.onmouseenter=function(){s.setExpanded(!0)},this.panel._elm.onmouseleave=function(){s.setExpanded(!1)}},setDirection:function(t){this.direction=t},showArrow:function(){this.arrow.style.display="block"},setIcon:function(t){null===this.icon&&(this.icon=document.createElement("img"),this.icon.style.display="block",this.icon.style.position="absolute",this.icon.style.left="5px",this.icon.style.top="3px",this.icon.style.width="12px",this.icon.style.height="12px",this._elm.appendChild(this.icon)),this.icon.src=t},removeOption:function(t){t>=0&&t<this.options.length&&(this.options[t].destroy(),this.options.splice(t,1))},addOption:function(t,i,e){var s=new o(this.panel);s._elm.style.zIndex="200",s.setText(t),s.setAlignment(Text.LEFT),s.position.set(25,0);var n=this;return s.setOnClick(function(){i(),n.setExpanded(!1)}),void 0!==e&&s.setIcon(e),this.options.push(s),s},addMenu:function(t,i){var e=new n(this.panel);return e.setText(t),e.setDirection(n.LEFT),e.showArrow(),e.setAlignment(Text.LEFT),e.setMargin(25),void 0!==i&&e.setIcon(i),this.options.push(e),e},setExpanded:function(t){if(this.expanded=t,this.expanded){if(this.panel._elm.style.display="block",this.direction===n.DOWN)this.panel._elm.style.top=this.position.y+this.size.y+"px",this.panel._elm.style.left=this.position.x+"px",0!==(e=i.testAsis(this.panel)).y&&(this.panel._elm.style.top=null,this.panel._elm.style.bottom=this.position.y+this.size.y+"px"),0!==e.x&&(this.panel._elm.style.left=this.position.x-e.x+"px");else if(this.direction===n.UP){this.panel._elm.style.bottom=this.position.y+this.size.y+"px",this.panel._elm.style.left=this.position.x+"px",0!==(e=i.testAsis(this.panel)).y&&(this.panel._elm.style.bottom=null,this.panel._elm.style.top=this.position.y+this.size.y+"px"),0!==e.x&&(this.panel._elm.style.left=this.position.x-e.x+"px")}else if(this.direction===n.LEFT){this.panel._elm.style.top=this.position.y+"px",this.panel._elm.style.left=this.position.x+this.size.x+"px",0!==(e=i.testAsis(this.panel)).x&&(this.panel._elm.style.left=this.position.x-this.size.x+"px"),0!==e.y&&(this.panel._elm.style.top=this.position.y-e.y+"px")}else if(this.direction===n.RIGHT){var e;this.panel._elm.style.top=this.position.y+"px",this.panel._elm.style.left=this.position.x-this.size.x+"px",0!==(e=i.testAsis(this.panel)).x&&(this.panel._elm.style.left=this.position.x+this.size.x+"px"),0!==e.y&&(this.panel._elm.style.top=this.position.y-e.y+"px")}}else this.panel._elm.style.display="none"},updateOptions:function(){for(var t=0;t<this.options.length;t++)this.options[t].size.set(this.optionsSize.x,this.optionsSize.y),this.options[t].position.set(0,this.optionsSize.y*t),this.options[t].updateInterface();this.panel._elm.style.width=this.size.x+"px",this.panel._elm.style.height=this.optionsSize.y*this.options.length+"px"},destroy:function(){e.prototype.destroy.call(this),this.parent.destroy()},updateSize:function(){this.updateOptions()},...s});return n.DOWN=0,n.UP=1,n.LEFT=2,n.RIGHT=3,n});
//# sourceMappingURL=../sourcemaps/menus/DropdownMenu.js.map
