/**
 * skylark-widgets-actions - The skylark action widgets library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-actions/
 * @license MIT
 */
!function(t,e){var i=e.define,require=e.require,s="function"==typeof i&&i.amd,n=!s&&"undefined"!=typeof exports;if(!s&&!i){var o={};i=e.define=function(t,e,i){"function"==typeof i?(o[t]={factory:i,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var i=e.split("/"),s=t.split("/");i.pop();for(var n=0;n<s.length;n++)"."!=s[n]&&(".."==s[n]?i.pop():i.push(s[n]));return i.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):o[t]={factory:null,resolved:!0,exports:i}},require=e.require=function(t){if(!o.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=o[t];if(!module.resolved){var i=[];module.deps.forEach(function(t){i.push(require(t))}),module.exports=module.factory.apply(e,i)||null,module.resolved=!0}return module.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-widgets-actions/actions",["skylark-langx/skylark"],function(t){return t.attach("widgets.actions",{buttons:{},menus:{}})}),t("skylark-widgets-actions/buttons/Button",["skylark-widgets-base/Widget","../actions"],function(t,e){"use strict";var i=t.inherit({_construct:function(e){t.prototype._construct.call(this,e,"div"),this._elm.style.cursor="pointer",this.preventDragEvents()},setColor:function(t,e){this._elm.style.backgroundColor=t,this._elm.onmouseenter=function(){this.style.backgroundColor=e},this._elm.onmouseleave=function(){this.style.backgroundColor=t}},setStyles:function(t,e){for(var i in t)this._elm.style[i]=t[i];this._elm.onmouseenter=function(){for(var t in e)this.style[t]=e[t]},this._elm.onmouseleave=function(){for(var e in t)this.style[e]=t[e]}}});return e.buttons.Button=i}),t("skylark-widgets-base/mixins/ImageMixin",["skylark-langx-numerics/Vector2","../Widget"],function(t,e){"use strict";var i={_buildImage:function(t){this.icon=document.createElement("img"),this.icon.style.pointerEvents="none",this.icon.style.position="absolute",this.icon.style.top="15%",this.icon.style.left="15%",this.icon.style.width="70%",this.icon.style.height="70%",this._elm.appendChild(this.icon)},setImage:function(t){this.icon.src=t},setImageScale:function(t,e){this.icon.style.top=(1-e)/2*100+"%",this.icon.style.left=(1-t)/2*100+"%",this.icon.style.width=100*t+"%",this.icon.style.height=100*e+"%"}};return i}),t("skylark-widgets-actions/buttons/ButtonImage",["skylark-widgets-base/mixins/ImageMixin","../actions","./Button"],function(t,e,i){"use strict";var s=i.inherit({_construct:function(t){i.prototype._construct.call(this,t),this._buildImage(),this.setColor(null,Editor.theme.buttonOverColor)},...t});return e.buttons.ButtonImage=s}),t("skylark-widgets-actions/buttons/ButtonDrawer",["skylark-langx-numerics/Vector2","skylark-widgets-base/Widget","../actions","./ButtonImage"],function(t,e,i,s){"use strict";var n=s.inherit({_construct:function(i){s.prototype._construct.call(this,i),this._elm.style.zIndex="200",this._elm.style.backgroundColor=Editor.theme.buttonColor,this._elm.style.overflow="visible",this.panel=new e(this,"div"),this.panel.element.style.overflow="visible",this.panel.element.style.backgroundColor=Editor.theme.barColor,this.panel.element.style.zIndex="250",this.items=[],this.itemsPerLine=3,this.itemsSize=new t(40,40),this.itemsScale=new t(.7,.7),this.expanded=!1,this.setExpanded(!1);var n=this;this._elm.onmouseenter=function(){n.element.style.backgroundColor=Editor.theme.buttonOverColor,n.setExpanded(!0)},this._elm.onmouseleave=function(){n.element.style.backgroundColor=Editor.theme.buttonColor,n.setExpanded(!1)},this.panel.element.onmouseenter=function(){n.setExpanded(!0)},this.panel.element.onmouseleave=function(){n.setExpanded(!1)}},clear:function(){for(var t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]},setExpanded:function(t){this.expanded=t,this.panel.element.style.display=this.expanded?"block":"none"},insertItem:function(t){t.attachTo(this.panel),this.items.push(t)},addItem:function(t,e,i){var n=this,o=new s(this.panel);o.setImage(t),o.setOnClick(function(){e(),n.expanded=!1,n.updateInterface()}),void 0!==i&&o.setAltText(i),this.items.push(o)},removeItem:function(t){t>=0&&t<this.items.length&&(this.items[t].destroy(),this.items.splice(t,1))},updatePanelSize:function(){var t=this.items.length<this.itemsPerLine?this.items.length:this.itemsPerLine;this.panel.size.x=this.itemsSize.x*t,this.panel.size.y=this.itemsSize.y*(Math.floor((this.items.length-1)/t)+1),this.panel.updateSize(),this.panel.position.set(this.itemsSize.x,0),this.panel.updatePosition()},updateItems:function(){this.updatePanelSize();for(var t=this.items.length<this.itemsPerLine?this.items.length:this.itemsPerLine,e=0;e<this.items.length;e++)this.items[e].size.set(this.itemsSize.x,this.itemsSize.y),this.items[e].position.x=this.itemsSize.x*(e%t),this.items[e].position.y=this.itemsSize.y*Math.floor(e/t),this.items[e].updateInterface()},updateVisibility:function(){this._elm.style.display=this.visible?"block":"none"},optionsSize:{get:function(){return this.itemsSize},set:function(t){this.itemsSize=t}},optionsPerLine:{get:function(){return this.itemsPerLine},set:function(t){this.itemsPerLine=t}}});return n.prototype.addOption=n.prototype.addItem,n.prototype.insertOption=n.prototype.insertItem,n.prototype.updateOptions=n.prototype.updateItems,n.prototype.removeOption=n.prototype.reomveItem,i.buttons.ButtonDrawer=n}),t("skylark-widgets-actions/buttons/ButtonImageToggle",["../actions","./ButtonImage"],function(t,e){"use strict";var i=e.inherit({_construct:function(t){e.prototype._construct.call(this,t),this._elm.style.display="flex",this._elm.style.justifyContent="center",this._elm.style.alignItems="center";var i=this.getSkin();this._elm.style.backgroundColor=i.buttonColor,this.selected=!1;var s=this;this._elm.onclick=function(){s.selected=!s.selected},this._elm.onmouseenter=function(){s.element.style.backgroundColor=i.buttonOverColor},this._elm.onmouseleave=function(){s.selected||(s.element.style.backgroundColor=i.buttonColor)}},setSelected:function(t){this.selected=t;var e=this.getSkin();this._elm.style.backgroundColor=this.selected?e.buttonOverColor:e.buttonColor},setOnClick:function(t){var e=this;this._elm.onclick=function(){e.selected=!e.selected,t()}}});return t.buttons.ButtonImageToggle=i}),t("skylark-widgets-actions/buttons/ButtonText",["skylark-widgets-base/mixins/TextMixin","../actions","./Button"],function(t,e,i){"use strict";var s=i.inherit({_construct:function(t){i.prototype._construct.call(this,t);var e=this.getSkin();this._elm.style.color=e.textColor,this._elm.style.display="flex",this._buildText(),this.setColor(e.buttonColor,e.buttonOverColor)},...t});return e.buttons.ButtonText=s}),t("skylark-widgets-actions/menus/ButtonMenu",["../actions","../buttons/ButtonText"],function(t,e){"use strict";var i=e.inherit({_construct:function(t){e.prototype._construct.call(this,t),this.span.style.textIndent="25px",this.icon=null;var i=this.getSkin();this.setColor(i.buttonColor,i.buttonOverColor)},setIcon:function(t){null===this.icon&&(this.icon=document.createElement("img"),this.icon.style.position="absolute",this.icon.style.display="block",this.icon.style.left="5px",this.icon.style.top="3px",this.icon.style.width="12px",this.icon.style.height="12px",this._elm.appendChild(this.icon)),this.icon.src=t}});return t.buttons.ButtonMenu=i}),t("skylark-widgets-actions/menus/DropdownMenu",["skylark-langx-numerics/Vector2","skylark-domx-geom","skylark-widgets-base/Widget","skylark-widgets-base/mixins/TextMixin","./ButtonMenu"],function(t,e,i,s,n){"use strict";var o=i.inherit({...s,_construct:function(e){i.prototype._construct.call(this,e,"div");var s=this.getSkin();this._elm.style.backgroundColor=Editor.theme.buttonColor,this._elm.style.cursor="pointer",this._elm.style.pointerEvents="auto",this._buildText(),this.preventDragEvents(),this.panel=new i(e,"div"),this.panel._elm.style.overflow="visible",this.panel._elm.style.display="none",this.panel._elm.style.zIndex="300",this.icon=null,this.arrow=document.createElement("img"),this.arrow.style.display="none",this.arrow.style.position="absolute",this.arrow.style.right="5px",this.arrow.style.top="3px",this.arrow.style.width="12px",this.arrow.style.height="12px",this.arrow.src=s.arrowRightImageUrl,this._elm.appendChild(this.arrow),this.direction=o.DOWN,this.expanded=!1,this.itemsSize=new t(150,20),this.items=[];var n=this;this._elm.onmouseenter=function(){n.setExpanded(!0),n._elm.style.backgroundColor=s.buttonOverColor},this._elm.onmouseleave=function(){n.setExpanded(!1),n._elm.style.backgroundColor=s.buttonColor},this.panel._elm.onmouseenter=function(){n.setExpanded(!0)},this.panel._elm.onmouseleave=function(){n.setExpanded(!1)}},setDirection:function(t){this.direction=t},showArrow:function(){this.arrow.style.display="block"},setIcon:function(t){null===this.icon&&(this.icon=document.createElement("img"),this.icon.style.display="block",this.icon.style.position="absolute",this.icon.style.left="5px",this.icon.style.top="3px",this.icon.style.width="12px",this.icon.style.height="12px",this._elm.appendChild(this.icon)),this.icon.src=t},removeItem:function(t){t>=0&&t<this.items.length&&(this.items[t].destroy(),this.items.splice(t,1))},addItem:function(t,e,i){var o=new n(this.panel);o._elm.style.zIndex="200",o.setText(t),o.setAlignment(s.LEFT),o.position.set(25,0);var l=this;return o.setOnClick(function(){e(),l.setExpanded(!1)}),void 0!==i&&o.setIcon(i),this.items.push(o),o},addMenu:function(t,e){var i=new o(this.panel);return i.setText(t),i.setDirection(o.LEFT),i.showArrow(),i.setAlignment(s.LEFT),i.setMargin(25),void 0!==e&&i.setIcon(e),this.items.push(i),i},setExpanded:function(t){if(this.expanded=t,this.expanded){if(this.panel._elm.style.display="block",this.direction===o.DOWN){this.panel._elm.style.top=this.position.y+this.size.y+"px",this.panel._elm.style.left=this.position.x+"px";var i=e.testAxis(this.panel);0!==i.y&&(this.panel._elm.style.top=null,this.panel._elm.style.bottom=this.position.y+this.size.y+"px"),0!==i.x&&(this.panel._elm.style.left=this.position.x-i.x+"px")}else if(this.direction===o.UP){this.panel._elm.style.bottom=this.position.y+this.size.y+"px",this.panel._elm.style.left=this.position.x+"px";var i=e.testAxis(this.panel);0!==i.y&&(this.panel._elm.style.bottom=null,this.panel._elm.style.top=this.position.y+this.size.y+"px"),0!==i.x&&(this.panel._elm.style.left=this.position.x-i.x+"px")}else if(this.direction===o.LEFT){this.panel._elm.style.top=this.position.y+"px",this.panel._elm.style.left=this.position.x+this.size.x+"px";var i=e.testAxis(this.panel);0!==i.x&&(this.panel._elm.style.left=this.position.x-this.size.x+"px"),0!==i.y&&(this.panel._elm.style.top=this.position.y-i.y+"px")}else if(this.direction===o.RIGHT){this.panel._elm.style.top=this.position.y+"px",this.panel._elm.style.left=this.position.x-this.size.x+"px";var i=e.testAxis(this.panel);0!==i.x&&(this.panel._elm.style.left=this.position.x+this.size.x+"px"),0!==i.y&&(this.panel._elm.style.top=this.position.y-i.y+"px")}}else this.panel._elm.style.display="none"},updateItems:function(){for(var t=0;t<this.items.length;t++)this.items[t].size.set(this.itemsSize.x,this.itemsSize.y),this.items[t].position.set(0,this.itemsSize.y*t),this.items[t].updateInterface();this.panel._elm.style.width=this.size.x+"px",this.panel._elm.style.height=this.itemsSize.y*this.items.length+"px"},destroy:function(){i.prototype.destroy.call(this),this.parent.destroy()},updateSize:function(){s.updateSize.call(this),this.updateItems()}});return o.DOWN=0,o.UP=1,o.LEFT=2,o.RIGHT=3,o.prototype.addOption=o.prototype.addItem,o.prototype.updateOptions=o.prototype.updateItems,o}),t("skylark-widgets-actions/menus/ContextMenu",["skylark-langx-numerics/Vector2","skylark-domx-geom","skylark-widgets-base/Widget","../actions","./ButtonMenu","./DropdownMenu"],function(t,e,i,s,n,o){"use strict";var l=i.inherit({_construct:function(e){i.prototype._construct.call(this,e,"div");var s=this;this._elm.style.overflow="visible",this._elm.style.zIndex="300",this._elm.onmouseleave=function(){s.destroy()},this.offset=new t(20,10),this.items=[]},setText:function(t){this.text.setText(t)},removeItem:function(t){t>=0&&t<this.items.length&&(this.items[t].destroy(),this.items.splice(t,1))},addItem:function(t,e){var i=new n(this);i._elm.style.zIndex="10000",i.setText(t),i.setAlignment(Text.LEFT),i.position.x=25;var s=this;i.setOnClick(function(){e(),s.destroy()}),this.items.push(i)},addMenu:function(t){var e=new o(this);return e.setText(t),e.setDirection(o.LEFT),e.showArrow(),e.setAlignment(Text.LEFT),e.setMargin(25),this.items.push(e),e},updateItems:function(){for(var t=0;t<this.items.length;t++)this.items[t].size.copy(this.size),this.items[t].position.set(0,this.size.y*t),this.items[t].updateInterface()},updateSize:function(){this._elm.style.width=this.size.x+"px",this._elm.style.height=this.size.y*this.items.length+"px",this.updateItems()},updatePosition:function(){this._elm.style.top=this.position.y-this.offset.y+"px",this._elm.style.left=this.position.x-this.offset.x+"px";var t=e.testAxis(this._elm);0!==t.x&&(this._elm.style.left=this.position.x+this.offset.x-this.size.x+"px"),0!==t.y&&(this._elm.style.top=this.position.y-this.offset.y-t.y+"px")}});return s.menus.ContextMenu=l}),t("skylark-widgets-actions/main",["./actions","./buttons/Button","./buttons/ButtonDrawer","./buttons/ButtonImage","./buttons/ButtonImageToggle","./buttons/ButtonText","./menus/ButtonMenu","./menus/ContextMenu","./menus/DropdownMenu"],function(t){return actions}),t("skylark-widgets-actions",["skylark-widgets-actions/main"],function(t){return t})}(i),!s){var l=require("skylark-langx-ns");n?module.exports=l:e.skylarkjs=l}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-widgets-actions.js.map
